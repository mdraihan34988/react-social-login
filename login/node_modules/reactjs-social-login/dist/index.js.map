{"version":3,"file":"index.js","sources":["../src/LoginSocialAmazon/index.tsx","../src/LoginSocialFacebook/index.tsx","../src/LoginSocialGoogle/index.tsx","../src/LoginSocialGithub/index.tsx","../src/LoginSocialInstagram/index.tsx","../src/LoginSocialMicrosoft/index.tsx","../src/LoginSocialLinkedin/index.tsx"],"sourcesContent":["/**\n *\n * LoginSocialAmazon\n *\n */\nimport React, { memo, useEffect, useState, useCallback } from 'react'\nimport { IResolveParams, objectType } from '../'\n\ninterface Props {\n  scope?: string\n  state?: string\n  client_id: string\n  className?: string\n  redirect_uri?: string\n  response_type?: string\n  scope_data?: objectType\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  onResolve: ({ provider, data }: IResolveParams) => void\n}\n\nconst JS_SRC = 'https://assets.loginwithamazon.com/sdk/na/login1.js'\nconst SCRIPT_ID = 'amazon-login'\nconst _window = window as any\n\nexport const LoginSocialAmazon = memo(\n  ({\n    state = 'DCEeFWf45A53sdfKef424',\n    client_id,\n    className,\n    redirect_uri,\n    scope = 'profile',\n    scope_data = {\n      profile: { essential: false }\n    },\n    response_type = 'token',\n    children,\n    onReject,\n    onResolve\n  }: Props) => {\n    const [isSdkLoaded, setIsSdkLoaded] = useState(false)\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      !isSdkLoaded && load()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isSdkLoaded])\n\n    const checkIsExistsSDKScript = useCallback(() => {\n      return !!document.getElementById(SCRIPT_ID)\n    }, [])\n\n    const insertScriptGoogle = useCallback(\n      (\n        d: HTMLDocument,\n        s: string = 'script',\n        id: string,\n        jsSrc: string,\n        cb: () => void\n      ) => {\n        const ggScriptTag: any = d.createElement(s)\n        ggScriptTag.id = id\n        ggScriptTag.src = jsSrc\n        ggScriptTag.async = true\n        ggScriptTag.defer = true\n        const scriptNode = document.getElementsByTagName('script')![0]\n        scriptNode &&\n          scriptNode.parentNode &&\n          scriptNode.parentNode.insertBefore(ggScriptTag, scriptNode)\n        ggScriptTag.onload = cb\n      },\n      []\n    )\n\n    const handleResponse = useCallback(\n      (res: objectType) => {\n        setIsProcessing(false)\n        onResolve({ provider: 'amazon', data: res })\n      },\n      [onResolve]\n    )\n\n    const handleError = useCallback(\n      (err: objectType | string) => {\n        setIsProcessing(false)\n        onReject(err)\n      },\n      [onReject]\n    )\n\n    const load = useCallback(() => {\n      if (checkIsExistsSDKScript()) {\n        setIsSdkLoaded(true)\n      } else {\n        insertScriptGoogle(document, 'script', SCRIPT_ID, JS_SRC, () => {\n          _window.amazon.Login.setClientId(client_id)\n          setIsSdkLoaded(true)\n        })\n      }\n    }, [checkIsExistsSDKScript, client_id, insertScriptGoogle])\n\n    const onLogin = useCallback(() => {\n      if (isProcessing || !isSdkLoaded) return\n      setIsProcessing(true)\n      if (!_window.amazon) {\n        setIsProcessing(false)\n        load()\n        onReject(\"Google SDK isn't loaded!\")\n      } else {\n        _window.amazon.Login.authorize(\n          { scope, scope_data, response_type, redirect_uri, state },\n          (res: objectType) => {\n            if (res.error) handleError(res.error)\n            else handleResponse(res)\n          }\n        )\n      }\n    }, [\n      load,\n      state,\n      scope,\n      onReject,\n      scope_data,\n      isSdkLoaded,\n      handleError,\n      redirect_uri,\n      isProcessing,\n      response_type,\n      handleResponse\n    ])\n\n    return (\n      <div className={className} onClick={onLogin}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialAmazon\n","/**\n *\n * LoginSocialFacebook\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { objectType, IResolveParams } from '../'\n\ninterface Props {\n  appId: string\n  scope?: string\n  state?: boolean\n  xfbml?: boolean\n  cookie?: boolean\n  version?: string\n  language?: string\n  auth_type?: string\n  className?: string\n  isDisabled?: boolean\n  onReject: (reject: string | objectType) => void\n  onResolve: ({ provider, data }: IResolveParams) => void\n  redirect_uri?: string\n  fieldsProfile?: string\n  response_type?: string\n  return_scopes?: boolean\n  children?: React.ReactNode\n}\n\nconst SDK_URL: string = 'https://connect.facebook.net/en_EN/sdk.js'\nconst SCRIPT_ID: string = 'facebook-jssdk'\nconst _window = window as any\n\nconst LoginSocialFacebook = memo(\n  ({\n    appId,\n    scope = 'email,public_profile',\n    state = true,\n    xfbml = true,\n    cookie = true,\n    version = 'v2.7',\n    language = 'en_EN',\n    auth_type = '',\n    className,\n    onReject,\n    onResolve,\n    redirect_uri,\n    fieldsProfile = 'name, email, birthday',\n    response_type = 'code',\n    return_scopes = true,\n    children\n  }: Props) => {\n    const [isSdkLoaded, setIsSdkLoaded] = useState(false)\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      !isSdkLoaded && load()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isSdkLoaded])\n\n    const insertSDKScript = useCallback(\n      (document: HTMLDocument, cb: () => void) => {\n        const fbScriptTag = document.createElement('script')\n        fbScriptTag.id = SCRIPT_ID\n        fbScriptTag.src = SDK_URL\n        const scriptNode = document.getElementsByTagName('script')![0]\n        scriptNode &&\n          scriptNode.parentNode &&\n          scriptNode.parentNode.insertBefore(fbScriptTag, scriptNode)\n        cb()\n      },\n      []\n    )\n\n    const checkIsExistsSDKScript = useCallback(() => {\n      return !!document.getElementById(SCRIPT_ID)\n    }, [])\n\n    const initFbSDK = useCallback(\n      (config: objectType, document: HTMLDocument) => {\n        const _window = window as any\n        _window.fbAsyncInit = function () {\n          _window.FB && _window.FB.init({ ...config })\n          setIsSdkLoaded(true)\n          let fbRoot = document.getElementById('fb-root')\n          if (!fbRoot) {\n            fbRoot = document.createElement('div')\n            fbRoot.id = 'fb-root'\n            document.body.appendChild(fbRoot)\n          }\n        }\n      },\n      []\n    )\n\n    const getMe = useCallback(\n      (authResponse: objectType) => {\n        _window.FB.api(\n          '/me',\n          { locale: language, fields: fieldsProfile },\n          (me: any) => {\n            onResolve({\n              provider: 'facebook',\n              data: { ...authResponse, ...me }\n            })\n          }\n        )\n      },\n      [fieldsProfile, language, onResolve]\n    )\n\n    const handleResponse = useCallback(\n      (response: objectType) => {\n        if (response.authResponse) {\n          getMe(response.authResponse)\n        } else {\n          onReject(response)\n        }\n        setIsProcessing(false)\n      },\n      [getMe, onReject]\n    )\n\n    const load = useCallback(() => {\n      if (checkIsExistsSDKScript()) {\n        setIsSdkLoaded(true)\n      } else {\n        insertSDKScript(document, () => {\n          initFbSDK(\n            {\n              appId,\n              xfbml,\n              version,\n              state,\n              cookie,\n              redirect_uri,\n              response_type\n            },\n            document\n          )\n        })\n      }\n    }, [\n      state,\n      appId,\n      xfbml,\n      cookie,\n      version,\n      initFbSDK,\n      redirect_uri,\n      response_type,\n      insertSDKScript,\n      checkIsExistsSDKScript\n    ])\n\n    const loginFB = useCallback(() => {\n      if (isProcessing || !isSdkLoaded) return\n      setIsProcessing(true)\n      if (!_window.FB) {\n        setIsProcessing(false)\n        load()\n        onReject(\"Fb isn't loaded!\")\n      } else {\n        _window.FB.login(handleResponse, {\n          scope,\n          return_scopes,\n          auth_type\n        })\n      }\n    }, [\n      load,\n      scope,\n      onReject,\n      auth_type,\n      isSdkLoaded,\n      isProcessing,\n      return_scopes,\n      handleResponse\n    ])\n\n    return (\n      <div className={className} onClick={loginFB}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialFacebook\n","/**\n *\n * LoginSocialGoogle\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { objectType, IResolveParams } from '../'\n\ninterface Props {\n  scope?: string\n  prompt?: string\n  ux_mode?: string\n  client_id: string\n  className?: string\n  login_hint?: string\n  access_type?: string\n  redirect_uri?: string\n  cookie_policy?: string\n  hosted_domain?: string\n  discoveryDocs?: string\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  fetch_basic_profile?: boolean\n  onResolve: ({ provider, data }: IResolveParams) => void\n}\n\nconst SCOPE = ''\nconst JS_SRC = 'https://apis.google.com/js/api.js'\nconst SCRIPT_ID = 'google-login'\nconst _window = window as any\n\nconst LoginSocialGoogle = memo(\n  ({\n    client_id,\n    scope = 'email profile',\n    prompt = 'select_account',\n    ux_mode,\n    className = '',\n    login_hint = '',\n    access_type = 'online',\n    onReject,\n    onResolve,\n    redirect_uri = '/',\n    cookie_policy = 'single_host_origin',\n    hosted_domain = '',\n    discoveryDocs = '',\n    children,\n    fetch_basic_profile = true\n  }: Props) => {\n    const [isSdkLoaded, setIsSdkLoaded] = useState(false)\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      !isSdkLoaded && load()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isSdkLoaded])\n\n    const checkIsExistsSDKScript = useCallback(() => {\n      return !!document.getElementById(SCRIPT_ID)\n    }, [])\n\n    const insertScriptGoogle = useCallback(\n      (\n        d: HTMLDocument,\n        s: string = 'script',\n        id: string,\n        jsSrc: string,\n        cb: () => void\n      ) => {\n        const ggScriptTag: any = d.createElement(s)\n        ggScriptTag.id = id\n        ggScriptTag.src = jsSrc\n        ggScriptTag.async = true\n        ggScriptTag.defer = true\n        const scriptNode = document.getElementsByTagName('script')![0]\n        scriptNode &&\n          scriptNode.parentNode &&\n          scriptNode.parentNode.insertBefore(ggScriptTag, scriptNode)\n        ggScriptTag.onload = cb\n      },\n      []\n    )\n\n    const handleResponse = useCallback(\n      (res: objectType) => {\n        setIsProcessing(false)\n        let data: { provider_id?: string; data: objectType } = {\n          provider_id: undefined,\n          data: {}\n        }\n        Object.values(res)\n          .filter((item) => typeof item === 'string' || item?.access_token)\n          .forEach((item) => {\n            typeof item === 'string'\n              ? (data.provider_id = item)\n              : (data.data = item)\n          })\n        onResolve({\n          provider: 'google',\n          data\n        })\n      },\n      [onResolve]\n    )\n\n    const handleError = useCallback(\n      (err: objectType | string) => {\n        setIsProcessing(false)\n        onReject(err)\n      },\n      [onReject]\n    )\n\n    const load = useCallback(() => {\n      if (checkIsExistsSDKScript()) {\n        setIsSdkLoaded(true)\n      } else {\n        insertScriptGoogle(document, 'script', SCRIPT_ID, JS_SRC, () => {\n          const params = {\n            client_id,\n            cookie_policy,\n            login_hint,\n            hosted_domain,\n            fetch_basic_profile,\n            discoveryDocs,\n            ux_mode,\n            redirect_uri,\n            access_type,\n            scope: SCOPE,\n            immediate: true\n          }\n          _window.gapi.load('auth2', () => {\n            const gapiAuth = _window.gapi.auth2\n            !gapiAuth.getAuthInstance()\n              ? gapiAuth.init(params).then(() => {\n                  setIsSdkLoaded(true)\n                })\n              : onReject('not exist an instance')\n          })\n        })\n      }\n    }, [\n      ux_mode,\n      onReject,\n      client_id,\n      login_hint,\n      access_type,\n      redirect_uri,\n      discoveryDocs,\n      cookie_policy,\n      hosted_domain,\n      insertScriptGoogle,\n      fetch_basic_profile,\n      checkIsExistsSDKScript\n    ])\n\n    const loginGoogle = useCallback(() => {\n      if (isProcessing || !isSdkLoaded) return\n      setIsProcessing(true)\n      if (!_window.gapi) {\n        setIsProcessing(false)\n        load()\n        onReject(\"Google SDK isn't loaded!\")\n      } else {\n        const auth2 = _window.gapi.auth2.getAuthInstance()\n        const options = {\n          prompt,\n          scope,\n          ux_mode\n        }\n        // auth2.grantOfflineAccess(options).then((res: any) => {\n        //   console.log(res);\n        // });\n        auth2.signIn(options).then(handleResponse).catch(handleError)\n      }\n    }, [\n      load,\n      scope,\n      prompt,\n      ux_mode,\n      onReject,\n      handleError,\n      isSdkLoaded,\n      isProcessing,\n      handleResponse\n    ])\n\n    return (\n      <div className={className} onClick={loginGoogle}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialGoogle\n","/* eslint-disable camelcase */\n/**\n *\n * LoginSocialGithub\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { IResolveParams, objectType } from '../'\n\ninterface Props {\n  state?: string\n  scope?: string\n  client_id: string\n  className?: string\n  redirect_uri: string\n  // client_secret: string\n  allow_signup?: boolean\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  onResolve: ({ provider, data }: IResolveParams) => void\n}\n\nconst GITHUB_URL: string = 'https://github.com'\n// const GITHUB_API_URL: string = 'https://api.github.com/'\n// const PREVENT_CORS_URL: string = 'https://cors-anywhere.herokuapp.com'\n\nexport const LoginSocialGithub = memo(\n  ({\n    state = 'DCEeFWf45A53sdfKef424',\n    scope = 'repo,gist',\n    client_id,\n    // client_secret,\n    className = '',\n    redirect_uri,\n    allow_signup = false,\n    children,\n    // onReject,\n    onResolve\n  }: Props) => {\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      const popupWindowURL = new URL(window.location.href)\n      const code = popupWindowURL.searchParams.get('code')\n      const state = popupWindowURL.searchParams.get('state')\n      if (state?.includes('_github') && code) {\n        localStorage.setItem('github', code)\n        window.close()\n      }\n    }, [])\n\n    const onChangeLocalStorage = useCallback(() => {\n      window.removeEventListener('storage', onChangeLocalStorage, false)\n      const code = localStorage.getItem('github')\n      if (code) {\n        setIsProcessing(true)\n        handlePostMessage({ provider: 'github', type: 'code', code })\n        localStorage.removeItem('instagram')\n      }\n    }, [])\n\n    // const getProfile = useCallback(\n    //   (data) => {\n    //     fetch(`${PREVENT_CORS_URL}/${GITHUB_API_URL}/user`, {\n    //       method: 'GET',\n    //       headers: {\n    //         Authorization: `token ${data.access_token}`\n    //       }\n    //     })\n    //       .then((res) => res.json())\n    //       .then((response: any) => {\n    //         setIsProcessing(false)\n    //         onResolve({ provider: 'github', data: { ...response, ...data } })\n    //       })\n    //       .catch((err) => {\n    //         setIsProcessing(false)\n    //         onReject(err)\n    //       })\n    //   },\n    //   [onReject, onResolve]\n    // )\n\n    const getAccessToken = useCallback(\n      (code: string) => {\n        setIsProcessing(false)\n        onResolve({ provider: 'github', data: { code } })\n        // const params = {\n        //   code,\n        //   state,\n        //   redirect_uri,\n        //   client_id,\n        //   client_secret\n        // }\n        // const headers = new Headers({\n        //   'Content-Type': 'application/x-www-form-urlencoded'\n        // })\n\n        // fetch(`${PREVENT_CORS_URL}/${GITHUB_URL}/login/oauth/access_token`, {\n        //   method: 'POST',\n        //   headers,\n        //   body: new URLSearchParams(params)\n        // })\n        //   .then((response) => response.text())\n        //   .then((response) => {\n        //     setIsProcessing(false)\n        //     const data: objectType = {}\n        //     const searchParams: any = new URLSearchParams(response)\n        //     for (const p of searchParams) {\n        //       data[p[0]] = p[1]\n        //     }\n        //     if (data.access_token) onResolve({ provider: 'github', data })\n        //     else onReject('no data')\n        //   })\n        //   .catch((err) => {\n        //     setIsProcessing(false)\n        //     onReject(err)\n        //   })\n      },\n      [onResolve]\n    )\n\n    const handlePostMessage = useCallback(\n      async ({ type, code, provider }) =>\n        type === 'code' &&\n        provider === 'github' &&\n        code &&\n        getAccessToken(code),\n      [getAccessToken]\n    )\n\n    const onLogin = useCallback(() => {\n      if (!isProcessing) {\n        window.addEventListener('storage', onChangeLocalStorage, false)\n        const oauthUrl = `${GITHUB_URL}/login/oauth/authorize?client_id=${client_id}&scope=${scope}&state=${\n          state + '_github'\n        }&redirect_uri=${redirect_uri}&allow_signup=${allow_signup}`\n        const width = 450\n        const height = 730\n        const left = window.screen.width / 2 - width / 2\n        const top = window.screen.height / 2 - height / 2\n        window.open(\n          oauthUrl,\n          'Github',\n          'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' +\n            width +\n            ', height=' +\n            height +\n            ', top=' +\n            top +\n            ', left=' +\n            left\n        )\n      }\n    }, [isProcessing, client_id, scope, state, redirect_uri, allow_signup])\n\n    return (\n      <div className={className} onClick={onLogin}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialGithub\n","/**\n *\n * LoginSocialInstagram\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { objectType, IResolveParams } from '../'\n\ninterface Props {\n  scope?: string\n  state?: string\n  client_id: string\n  className?: string\n  // client_secret: string\n  redirect_uri: string\n  response_type?: string\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  onResolve: ({ provider, data }: IResolveParams) => void\n}\n\nconst INSTAGRAM_URL = 'https://api.instagram.com'\n// const INSTAGRAM_API_URL = 'https://graph.instagram.com/'\n// const PREVENT_CORS_URL: string = 'https://cors-anywhere.herokuapp.com'\n\nexport const LoginSocialInstagram = memo(\n  ({\n    state = 'DCEeFWf45A53sdfKef424',\n    client_id,\n    // client_secret,\n    className,\n    redirect_uri,\n    scope = 'user_profile,user_media',\n    response_type = 'code',\n    children,\n    // onReject,\n    onResolve\n  }: Props) => {\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      const popupWindowURL = new URL(window.location.href)\n      const code = popupWindowURL.searchParams.get('code')\n      const state = popupWindowURL.searchParams.get('state')\n      if (state?.includes('_instagram') && code) {\n        localStorage.setItem('instagram', code)\n        window.close()\n      }\n    }, [])\n\n    const onChangeLocalStorage = useCallback(() => {\n      window.removeEventListener('storage', onChangeLocalStorage, false)\n      const code = localStorage.getItem('instagram')\n      if (code) {\n        setIsProcessing(true)\n        handlePostMessage({ provider: 'instagram', type: 'code', code })\n        localStorage.removeItem('instagram')\n      }\n    }, [])\n\n    // const getProfile = useCallback(\n    //   (data) => {\n    //     fetch(\n    //       `${PREVENT_CORS_URL}/${INSTAGRAM_API_URL}/me?fields=id,username&access_token=${data.access_token}`,\n    //       {\n    //         method: 'GET'\n    //       }\n    //     )\n    //       .then((res) => res.json())\n    //       .then((res) => {\n    //         setIsProcessing(false)\n    //         onResolve({ provider: 'instagram', data: { ...res, ...data } })\n    //       })\n    //       .catch((err) => {\n    //         setIsProcessing(false)\n    //         onReject(err)\n    //       })\n    //   },\n    //   [onReject, onResolve]\n    // )\n\n    const getAccessToken = useCallback(\n      (code: string) => {\n        setIsProcessing(false)\n        onResolve({ provider: 'instagram', data: { code } })\n        // const params = {\n        //   grant_type: 'authorization_code',\n        //   code,\n        //   redirect_uri,\n        //   client_id,\n        //   client_secret\n        // }\n        // const headers = new Headers({\n        //   'Content-Type': 'application/x-www-form-urlencoded'\n        // })\n        // fetch(`${PREVENT_CORS_URL}/${INSTAGRAM_URL}/oauth/access_token`, {\n        //   method: 'POST',\n        //   headers,\n        //   body: new URLSearchParams(params)\n        // })\n        //   .then((response) => response.json())\n        //   .then((data) => {\n        //     setIsProcessing(false)\n        //     if (data.access_token) onResolve({ provider: 'instagram', data })\n        //     else onReject('no data')\n        //   })\n        //   .catch((err) => {\n        //     setIsProcessing(false)\n        //     onReject(err)\n        //   })\n      },\n      [onResolve]\n    )\n\n    const handlePostMessage = useCallback(\n      async ({ type, code, provider }) =>\n        type === 'code' &&\n        provider === 'instagram' &&\n        code &&\n        getAccessToken(code),\n      [getAccessToken]\n    )\n\n    const onLogin = useCallback(() => {\n      if (!isProcessing) {\n        window.addEventListener('storage', onChangeLocalStorage, false)\n        const oauthUrl = `${INSTAGRAM_URL}/oauth/authorize?response_type=${response_type}&client_id=${client_id}&scope=${scope}&state=${\n          state + '_instagram'\n        }&redirect_uri=${redirect_uri}`\n        const width = 450\n        const height = 730\n        const left = window.screen.width / 2 - width / 2\n        const top = window.screen.height / 2 - height / 2\n        window.open(\n          oauthUrl,\n          'Instagram',\n          'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' +\n            width +\n            ', height=' +\n            height +\n            ', top=' +\n            top +\n            ', left=' +\n            left\n        )\n      }\n    }, [isProcessing, client_id, redirect_uri, response_type, scope, state])\n\n    return (\n      <div className={className} onClick={onLogin}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialInstagram\n","/**\n *\n * LoginSocialMicrosoft\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { IResolveParams, objectType } from '../'\n\ninterface Props {\n  scope?: string\n  state?: string\n  client_id: string\n  className?: string\n  redirect_uri: string\n  response_type?: string\n  response_mode?: string\n  code_challenge?: string\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  code_challenge_method?: 'plain' | 's256'[]\n  onResolve: ({ provider, data }: IResolveParams) => void\n  tenant?: 'common' | 'organizations' | 'consumers'\n  prompt?: 'login' | 'none' | 'consent' | 'select_account'\n}\n\nconst MICROSOFT_URL = 'https://login.microsoftonline.com'\nconst MICROSOFT_API_URL = 'https://graph.microsoft.com'\n// const PREVENT_CORS_URL: string = 'https://cors-anywhere.herokuapp.com';\n\nexport const LoginSocialMicrosoft = memo(\n  ({\n    tenant = 'common',\n    state = 'DCEeFWf45A53sdfKef424',\n    client_id,\n    className,\n    redirect_uri,\n    scope = 'profile openid email',\n    response_type = 'code',\n    response_mode = 'query',\n    children,\n    code_challenge = '19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9',\n    code_challenge_method = 'plain',\n    prompt = 'select_account',\n    onReject,\n    onResolve\n  }: Props) => {\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      const popupWindowURL = new URL(window.location.href)\n      const code = popupWindowURL.searchParams.get('code')\n      const state = popupWindowURL.searchParams.get('state')\n      if (state?.includes('_microsoft') && code) {\n        localStorage.setItem('microsoft', code)\n        window.close()\n      }\n    }, [])\n\n    const onChangeLocalStorage = useCallback(() => {\n      window.removeEventListener('storage', onChangeLocalStorage, false)\n      const code = localStorage.getItem('microsoft')\n      if (code) {\n        setIsProcessing(true)\n        handlePostMessage({ provider: 'microsoft', type: 'code', code })\n        localStorage.removeItem('microsoft')\n      }\n    }, [])\n\n    const getProfile = useCallback(\n      (data) => {\n        fetch(`${MICROSOFT_API_URL}/v1.0/me`, {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${data.access_token}`\n          }\n        })\n          .then((res) => res.json())\n          .then((res) => {\n            setIsProcessing(false)\n            onResolve({ provider: 'microsoft', data: { ...res, ...data } })\n          })\n          .catch((err) => {\n            setIsProcessing(false)\n            onReject(err)\n          })\n      },\n      [onReject, onResolve]\n    )\n\n    const getAccessToken = useCallback(\n      (code: string) => {\n        const params = {\n          code,\n          scope,\n          client_id,\n          redirect_uri,\n          code_verifier: code_challenge,\n          grant_type: 'authorization_code'\n        }\n        const headers = new Headers({\n          'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n        })\n        fetch(`${MICROSOFT_URL}/${tenant}/oauth2/v2.0/token`, {\n          method: 'POST',\n          headers,\n          body: new URLSearchParams(params)\n        })\n          .then((response) => response.json())\n          .then((data) => {\n            if (data.access_token) getProfile(data)\n            else {\n              setIsProcessing(false)\n              onReject('no data')\n            }\n          })\n          .catch((err) => {\n            setIsProcessing(false)\n            onReject(err)\n          })\n      },\n      [\n        scope,\n        tenant,\n        onReject,\n        client_id,\n        getProfile,\n        redirect_uri,\n        code_challenge\n      ]\n    )\n\n    const handlePostMessage = useCallback(\n      async ({ type, code, provider }) =>\n        type === 'code' &&\n        provider === 'microsoft' &&\n        code &&\n        getAccessToken(code),\n      [getAccessToken]\n    )\n\n    const onLogin = useCallback(() => {\n      if (!isProcessing) {\n        window.addEventListener('storage', onChangeLocalStorage, false)\n        const oauthUrl = `${MICROSOFT_URL}/${tenant}/oauth2/v2.0/authorize?client_id=${client_id}\n        &response_type=${response_type}\n        &redirect_uri=${redirect_uri}\n        &response_mode=${response_mode}\n        &scope=${scope}\n        &state=${state + '_microsoft'}\n        &prompt=${prompt}\n        &code_challenge=${code_challenge}\n        &code_challenge_method=${code_challenge_method}`\n        const width = 450\n        const height = 730\n        const left = window.screen.width / 2 - width / 2\n        const top = window.screen.height / 2 - height / 2\n        window.open(\n          oauthUrl,\n          'Microsoft',\n          'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' +\n            width +\n            ', height=' +\n            height +\n            ', top=' +\n            top +\n            ', left=' +\n            left\n        )\n      }\n    }, [\n      scope,\n      state,\n      tenant,\n      prompt,\n      client_id,\n      isProcessing,\n      redirect_uri,\n      response_mode,\n      response_type,\n      code_challenge,\n      code_challenge_method\n    ])\n\n    return (\n      <div className={className} onClick={onLogin}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialMicrosoft\n","/**\n *\n * LoginSocialLinkedin\n *\n */\nimport React, { memo, useCallback, useEffect, useState } from 'react'\nimport { IResolveParams, objectType } from '../'\n\ninterface Props {\n  state?: string\n  scope?: string\n  client_id: string\n  className?: string\n  redirect_uri: string\n  // client_secret: string\n  response_type?: string\n  children?: React.ReactNode\n  onReject: (reject: string | objectType) => void\n  onResolve: ({ provider, data }: IResolveParams) => void\n}\n\nconst LINKEDIN_URL: string = 'https://www.linkedin.com'\n// const LINKEDIN_API_URL: string = 'https://api.linkedin.com'\n// const PREVENT_CORS_URL: string = 'https://cors-anywhere.herokuapp.com'\n\nexport const LoginSocialLinkedin = memo(\n  ({\n    state = 'DCEeFWf45A53sdfKef424',\n    scope = 'r_liteprofile',\n    client_id,\n    // client_secret,\n    className = '',\n    redirect_uri,\n    response_type = 'code',\n    children,\n    // onReject,\n    onResolve\n  }: Props) => {\n    const [isProcessing, setIsProcessing] = useState(false)\n\n    useEffect(() => {\n      const popupWindowURL = new URL(window.location.href)\n      const code = popupWindowURL.searchParams.get('code')\n      const state = popupWindowURL.searchParams.get('state')\n      if (state?.includes('_linkedin') && code) {\n        localStorage.setItem('linkedin', code)\n        window.close()\n      }\n    }, [])\n\n    const onChangeLocalStorage = useCallback(() => {\n      window.removeEventListener('storage', onChangeLocalStorage, false)\n      const code = localStorage.getItem('linkedin')\n      if (code) {\n        setIsProcessing(true)\n        handlePostMessage({ provider: 'linkedin', type: 'code', code })\n        localStorage.removeItem('linkedin')\n      }\n    }, [])\n\n    // const getProfile = useCallback(\n    //   (data) => {\n    //     fetch(`${PREVENT_CORS_URL}/${LINKEDIN_API_URL}/v2/me`, {\n    //       method: 'GET',\n    //       headers: {\n    //         Authorization: `Bearer ${data.access_token}`\n    //       }\n    //     })\n    //       .then((res) => res.json())\n    //       .then((res) => {\n    //         setIsProcessing(false)\n    //         onResolve({ provider: 'linkedin', data: { ...res, ...data } })\n    //       })\n    //       .catch((err) => {\n    //         setIsProcessing(false)\n    //         onReject(err)\n    //       })\n    //   },\n    //   [onReject, onResolve]\n    // )\n\n    const getAccessToken = useCallback(\n      (code: string) => {\n        setIsProcessing(false)\n        onResolve({ provider: 'linkedin', data: { code } })\n        // const params = {\n        //   grant_type: 'authorization_code',\n        //   code,\n        //   redirect_uri,\n        //   client_id,\n        //   client_secret\n        // }\n        // const headers = new Headers({\n        //   'Content-Type': 'application/x-www-form-urlencoded'\n        // })\n        // fetch(`${PREVENT_CORS_URL}/${LINKEDIN_URL}/oauth/v2/accessToken`, {\n        //   method: 'POST',\n        //   headers,\n        //   body: new URLSearchParams(params)\n        // })\n        //   .then((response) => response.json())\n        //   .then((data) => {\n        //     setIsProcessing(false)\n        //     if (data.access_token) onResolve({ provider: 'linkedin', data })\n        //     else onReject('no data')\n        //   })\n        //   .catch((err) => {\n        //     setIsProcessing(false)\n        //     onReject(err)\n        //   })\n      },\n      [onResolve]\n    )\n\n    const handlePostMessage = useCallback(\n      async ({ type, code, provider }) =>\n        type === 'code' &&\n        provider === 'linkedin' &&\n        code &&\n        getAccessToken(code),\n      [getAccessToken]\n    )\n\n    const onLogin = useCallback(() => {\n      if (!isProcessing) {\n        window.addEventListener('storage', onChangeLocalStorage, false)\n        const oauthUrl = `${LINKEDIN_URL}/oauth/v2/authorization?response_type=${response_type}&client_id=${client_id}&scope=${scope}&state=${\n          state + '_linkedin'\n        }&redirect_uri=${redirect_uri}`\n        const width = 450\n        const height = 730\n        const left = window.screen.width / 2 - width / 2\n        const top = window.screen.height / 2 - height / 2\n        window.open(\n          oauthUrl,\n          'Linkedin',\n          'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' +\n            width +\n            ', height=' +\n            height +\n            ', top=' +\n            top +\n            ', left=' +\n            left\n        )\n      }\n    }, [isProcessing, client_id, redirect_uri, response_type, scope, state])\n\n    return (\n      <div className={className} onClick={onLogin}>\n        {children}\n      </div>\n    )\n  }\n)\n\nexport default LoginSocialLinkedin\n"],"names":["JS_SRC","SCRIPT_ID","_window","window","LoginSocialAmazon","memo","state","client_id","className","redirect_uri","scope","scope_data","profile","essential","response_type","children","onReject","onResolve","useState","isSdkLoaded","setIsSdkLoaded","isProcessing","setIsProcessing","useEffect","load","checkIsExistsSDKScript","useCallback","document","getElementById","insertScriptGoogle","d","s","id","jsSrc","cb","ggScriptTag","createElement","src","async","defer","scriptNode","getElementsByTagName","parentNode","insertBefore","onload","handleResponse","res","provider","data","handleError","err","amazon","Login","setClientId","onLogin","authorize","error","React","onClick","SDK_URL","LoginSocialFacebook","appId","xfbml","cookie","version","language","auth_type","fieldsProfile","return_scopes","insertSDKScript","fbScriptTag","initFbSDK","config","fbAsyncInit","FB","init","fbRoot","body","appendChild","getMe","authResponse","api","locale","fields","me","response","loginFB","login","SCOPE","LoginSocialGoogle","prompt","ux_mode","login_hint","access_type","cookie_policy","hosted_domain","discoveryDocs","fetch_basic_profile","provider_id","undefined","Object","values","filter","item","access_token","forEach","params","immediate","gapi","gapiAuth","auth2","getAuthInstance","then","loginGoogle","options","signIn","GITHUB_URL","LoginSocialGithub","allow_signup","popupWindowURL","URL","location","href","code","searchParams","get","includes","localStorage","setItem","close","onChangeLocalStorage","removeEventListener","getItem","handlePostMessage","type","removeItem","getAccessToken","addEventListener","oauthUrl","width","height","left","screen","top","open","INSTAGRAM_URL","LoginSocialInstagram","MICROSOFT_URL","MICROSOFT_API_URL","LoginSocialMicrosoft","tenant","response_mode","code_challenge","code_challenge_method","getProfile","fetch","method","headers","Authorization","json","code_verifier","grant_type","Headers","URLSearchParams","LINKEDIN_URL","LoginSocialLinkedin"],"mappings":"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"}